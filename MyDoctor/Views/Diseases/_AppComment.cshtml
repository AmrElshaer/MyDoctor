
@model MyDoctor.Models.Disease
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
<hr />

<div class="input-group mb-3">
    <input name="DiseaseName" style="display:none" value="@Model.DiseaseName" class="DiseaseName form-control" type="text" />
    <input type="text" name="Commment" value="" class="Commment form-control" placeholder="Write Your Comment" aria-label="Recipient's username" aria-describedby="basic-addon2">
    <div class="input-group-append">
        <button class="Create input-group-text" id="basic-addon2">Create</button>
    </div>
</div>
   <div class="Comments">

   </div>    
           


    


    <script>
        $(document).ready(function () {
            $(".Create").on("click", function () {
              
                var Comment = $(".Commment").val();
                var DiseaseName = $(".DiseaseName").val();
                var obj = { Comment: Comment, DiseaseName: DiseaseName }
                $.ajax({
                    url: "/diseases/AppComment",
                    type: "GET",
                    data: obj,
                    success: function (data) { console.log("success"); },
                    error: function () { console.log("errorr"); },
                    
                    complete: function (jqerxhr) {
                        if (jqerxhr.status == '401') {
                            console.log('No comment');
                        }
                        else {
                            $(".Commments").val("");


                            $(".Comments").load("/diseases/AllComment?" + "DiseaseName" + "=" + DiseaseName, function (response, status, xhr) {
                                if (status == "error") {
                                    console.log("error");
                                }
                                else {
                                    console.log($(".Comments").html());
                                    var comments = jQuery.parseJSON($(".Comments").html());
                                    var defatulimage = "Defulat.jpg";
                                    $(".Comments").html("");
                                    $.each(comments, function (index, value) {

                                        $(".Comments").append(
                                            ` <a class="dropdown-item d-flex align-items-center mb-4" href="#">
                                                <div class="mr-3">
                                                    <div class="icon-circle bg-primary">
                                                        
                                                        <img class="img-profile rounded-circle" style="max-width: 50px;" src="/images/${value.imagePath?value.imagePath:defatulimage}">
                                                    </div>
                                                </div>
                                                <div>
                                                    <div class="small text-gray-500">${ value.userName}</div>
                                                    <span class="font-weight-bold">${ value.commment}</span>
                                                </div>
                                            </a>`
                                           
                                          
                                        );
                                    });
                                }


                            });

                        }
                    }
                });
                









            }


            );
        });
    </script>
